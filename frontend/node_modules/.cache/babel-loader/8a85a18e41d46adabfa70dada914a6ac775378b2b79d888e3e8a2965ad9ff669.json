{"ast":null,"code":"// frontend/src/utils/renderBastTemplate.js\nexport function renderBastTemplate(template, formData, dynamicFields, items, user, profil) {\n  if (!template) return '';\n  let newContent = template;\n\n  // === 1. RENDER KOP SURAT (HEADER) ===\n  const baseUrl = process.env.REACT_APP_API_URL.replace('/api', '');\n  const logoUrl = user !== null && user !== void 0 && user.logo ? `${baseUrl}/uploads/${user.logo}` : '';\n  const logo = user !== null && user !== void 0 && user.logo ? `<img src=\"${logoUrl}\" alt=\"Logo\" style=\"max-width:310px; max-height:155px; object-fit:contain; margin-left:auto;\">` : '';\n  const headerHTML = `\n        <div style=\"display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 4px solid black; padding-bottom: 10px; margin-bottom: 20px;\">\n            <div>\n                <h1 style=\"margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;\">${(user === null || user === void 0 ? void 0 : user.nama) || ''}</h1>\n                <p style=\"margin: 5px 0; font-size: 12px;\">${(user === null || user === void 0 ? void 0 : user.alamat) || ''}</p>\n                <p style=\"margin: 5px 0; font-size: 12px;\">Telp: ${(user === null || user === void 0 ? void 0 : user.no_telp) || ''} | Email: ${(user === null || user === void 0 ? void 0 : user.email) || ''}</p>\n            </div>\n            ${logo ? `<div style=\"text-align:right;\">${logo}</div>` : ''}\n        </div>\n    `;\n\n  // === 2. RENDER QR CODE ===\n  const qrCodeHTML = formData.qrcode_base64 ? `<div style=\"margin: 10px 0;\"><img src=\"${formData.qrcode_base64}\" alt=\"QR Code\" style=\"width: 80px; height: 80px;\"></div>` : `<div style=\"margin: 10px 0;\"><div style=\"width: 80px; height: 80px; border: 1px solid #ccc; font-size: 10px; display: flex; align-items: center; justify-content: center; color: #888;\">QR Code</div></div>`;\n\n  // === 3. GENERATE TABEL PRODUK/JASA ===\n  const tableRows = items.map((item, index) => {\n    const totalHarga = (Number(item.qty) || 0) * (Number(item.harga_per_unit) || 0);\n    return `\n            <tr>\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.produk || ''}</td>\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.deskripsi || ''}</td>\n                <td style=\"border: 1px solid #000; text-align: center; padding: 6px;\">${item.qty || 0}</td>\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">Rp ${Number(item.harga_per_unit || 0).toLocaleString('id-ID')}</td>\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">Rp ${totalHarga.toLocaleString('id-ID')}</td>\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.kondisi || ''}</td>\n            </tr>\n        `;\n  }).join('');\n  const tableHTML = items.length > 0 ? `\n        <table style=\"width: 100%; border-collapse: collapse; font-size: 12px; margin: 20px 0;\">\n            <thead>\n                <tr style=\"background-color: #f2f2f2;\">\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Produk</th>\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Deskripsi</th>\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Qty</th>\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Harga per unit</th>\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Total harga</th>\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Kondisi barang</th>\n                </tr>\n            </thead>\n            <tbody>${tableRows}</tbody>\n        </table>\n    ` : '<p><i>Tidak ada rincian produk/jasa yang diserahkan.</i></p>';\n\n  // === 4. DATA UMUM & GANTI PLACEHOLDER ===\n  const selectedProfil = profil.find(p => p.id === Number(formData.profil_id));\n  const tanggal = new Date(formData.tanggal || Date.now());\n  const namaHari = tanggal.toLocaleDateString('id-ID', {\n    weekday: 'long'\n  });\n  const tanggalDokumen = tanggal.toLocaleDateString('id-ID', {\n    day: 'numeric',\n    month: 'long',\n    year: 'numeric'\n  });\n  const tanggalDokumenSingkat = tanggal.toLocaleDateString('id-ID', {\n    day: 'numeric',\n    month: 'long',\n    year: 'numeric'\n  });\n  newContent = newContent.replace('{{kop_surat}}', headerHTML).replace('{{qrcode}}', qrCodeHTML).replace('{{tabel_produk}}', tableHTML).replace(/{{nomor_urut}}/g, formData.no_bast ? formData.no_bast.split('/')[0] : '...').replace(/{{bulan_romawi}}/g, formData.no_bast ? formData.no_bast.split('/')[3] : '...').replace(/{{tahun_dokumen}}/g, formData.no_bast ? formData.no_bast.split('/')[4] : '...').replace(/{{nama_hari}}/g, namaHari).replace(/{{tanggal_dokumen}}/g, tanggalDokumen).replace(/{{tanggal_dokumen_singkat}}/g, tanggalDokumenSingkat).replace(/{{nama_pihak_pertama}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.nama_pihak_pertama) || (user === null || user === void 0 ? void 0 : user.nama) || '[Nama Pihak Pertama]').replace(/{{jabatan_pihak_pertama}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.jabatan_pihak_pertama) || '[Jabatan Pihak Pertama]').replace(/{{alamat_pihak_pertama}}/g, (user === null || user === void 0 ? void 0 : user.alamat) || '[Alamat Pihak Pertama]').replace(/{{nama_pihak_kedua}}/g, (selectedProfil === null || selectedProfil === void 0 ? void 0 : selectedProfil.nama) || '[Nama Pihak Kedua]').replace(/{{jabatan_pihak_kedua}}/g, (selectedProfil === null || selectedProfil === void 0 ? void 0 : selectedProfil.jabatan) || '[Jabatan Pihak Kedua]').replace(/{{nip_pihak_kedua}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.nip_pihak_kedua) || '-').replace(/{{alamat_pihak_kedua}}/g, (selectedProfil === null || selectedProfil === void 0 ? void 0 : selectedProfil.alamat) || '[Alamat Pihak Kedua]');\n  return newContent;\n}","map":{"version":3,"names":["renderBastTemplate","template","formData","dynamicFields","items","user","profil","newContent","baseUrl","process","env","REACT_APP_API_URL","replace","logoUrl","logo","headerHTML","nama","alamat","no_telp","email","qrCodeHTML","qrcode_base64","tableRows","map","item","index","totalHarga","Number","qty","harga_per_unit","produk","deskripsi","toLocaleString","kondisi","join","tableHTML","length","selectedProfil","find","p","id","profil_id","tanggal","Date","now","namaHari","toLocaleDateString","weekday","tanggalDokumen","day","month","year","tanggalDokumenSingkat","no_bast","split","nama_pihak_pertama","jabatan_pihak_pertama","jabatan","nip_pihak_kedua"],"sources":["C:/Users/moham/Documents/CODE/SURAT CV MALIKI/frontend/src/utils/renderBastTemplate.js"],"sourcesContent":["// frontend/src/utils/renderBastTemplate.js\r\nexport function renderBastTemplate(template, formData, dynamicFields, items, user, profil) {\r\n    if (!template) return '';\r\n\r\n    let newContent = template;\r\n\r\n    // === 1. RENDER KOP SURAT (HEADER) ===\r\n    const baseUrl = process.env.REACT_APP_API_URL.replace('/api', ''); \r\n    const logoUrl = user?.logo ? `${baseUrl}/uploads/${user.logo}` : '';\r\n    const logo = user?.logo\r\n        ? `<img src=\"${logoUrl}\" alt=\"Logo\" style=\"max-width:310px; max-height:155px; object-fit:contain; margin-left:auto;\">`\r\n        : '';\r\n    \r\n    const headerHTML = `\r\n        <div style=\"display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 4px solid black; padding-bottom: 10px; margin-bottom: 20px;\">\r\n            <div>\r\n                <h1 style=\"margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;\">${user?.nama || ''}</h1>\r\n                <p style=\"margin: 5px 0; font-size: 12px;\">${user?.alamat || ''}</p>\r\n                <p style=\"margin: 5px 0; font-size: 12px;\">Telp: ${user?.no_telp || ''} | Email: ${user?.email || ''}</p>\r\n            </div>\r\n            ${logo ? `<div style=\"text-align:right;\">${logo}</div>` : ''}\r\n        </div>\r\n    `;\r\n\r\n    // === 2. RENDER QR CODE ===\r\n    const qrCodeHTML = formData.qrcode_base64\r\n        ? `<div style=\"margin: 10px 0;\"><img src=\"${formData.qrcode_base64}\" alt=\"QR Code\" style=\"width: 80px; height: 80px;\"></div>`\r\n        : `<div style=\"margin: 10px 0;\"><div style=\"width: 80px; height: 80px; border: 1px solid #ccc; font-size: 10px; display: flex; align-items: center; justify-content: center; color: #888;\">QR Code</div></div>`;\r\n    \r\n    // === 3. GENERATE TABEL PRODUK/JASA ===\r\n    const tableRows = items.map((item, index) => {\r\n        const totalHarga = (Number(item.qty) || 0) * (Number(item.harga_per_unit) || 0);\r\n        return `\r\n            <tr>\r\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.produk || ''}</td>\r\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.deskripsi || ''}</td>\r\n                <td style=\"border: 1px solid #000; text-align: center; padding: 6px;\">${item.qty || 0}</td>\r\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">Rp ${Number(item.harga_per_unit || 0).toLocaleString('id-ID')}</td>\r\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">Rp ${totalHarga.toLocaleString('id-ID')}</td>\r\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.kondisi || ''}</td>\r\n            </tr>\r\n        `;\r\n    }).join('');\r\n\r\n    const tableHTML = items.length > 0 ? `\r\n        <table style=\"width: 100%; border-collapse: collapse; font-size: 12px; margin: 20px 0;\">\r\n            <thead>\r\n                <tr style=\"background-color: #f2f2f2;\">\r\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Produk</th>\r\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Deskripsi</th>\r\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Qty</th>\r\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Harga per unit</th>\r\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Total harga</th>\r\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Kondisi barang</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>${tableRows}</tbody>\r\n        </table>\r\n    ` : '<p><i>Tidak ada rincian produk/jasa yang diserahkan.</i></p>';\r\n\r\n    // === 4. DATA UMUM & GANTI PLACEHOLDER ===\r\n    const selectedProfil = profil.find(p => p.id === Number(formData.profil_id));\r\n    const tanggal = new Date(formData.tanggal || Date.now());\r\n    const namaHari = tanggal.toLocaleDateString('id-ID', { weekday: 'long' });\r\n    const tanggalDokumen = tanggal.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });\r\n    const tanggalDokumenSingkat = tanggal.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });\r\n\r\n    newContent = newContent\r\n        .replace('{{kop_surat}}', headerHTML)\r\n        .replace('{{qrcode}}', qrCodeHTML)\r\n        .replace('{{tabel_produk}}', tableHTML)\r\n        .replace(/{{nomor_urut}}/g, formData.no_bast ? formData.no_bast.split('/')[0] : '...')\r\n        .replace(/{{bulan_romawi}}/g, formData.no_bast ? formData.no_bast.split('/')[3] : '...')\r\n        .replace(/{{tahun_dokumen}}/g, formData.no_bast ? formData.no_bast.split('/')[4] : '...')\r\n        .replace(/{{nama_hari}}/g, namaHari)\r\n        .replace(/{{tanggal_dokumen}}/g, tanggalDokumen)\r\n        .replace(/{{tanggal_dokumen_singkat}}/g, tanggalDokumenSingkat)\r\n        .replace(/{{nama_pihak_pertama}}/g, dynamicFields?.nama_pihak_pertama || user?.nama || '[Nama Pihak Pertama]')\r\n        .replace(/{{jabatan_pihak_pertama}}/g, dynamicFields?.jabatan_pihak_pertama || '[Jabatan Pihak Pertama]')\r\n        .replace(/{{alamat_pihak_pertama}}/g, user?.alamat || '[Alamat Pihak Pertama]')\r\n        .replace(/{{nama_pihak_kedua}}/g, selectedProfil?.nama || '[Nama Pihak Kedua]')\r\n        .replace(/{{jabatan_pihak_kedua}}/g, selectedProfil?.jabatan || '[Jabatan Pihak Kedua]')\r\n        .replace(/{{nip_pihak_kedua}}/g, dynamicFields?.nip_pihak_kedua || '-')\r\n        .replace(/{{alamat_pihak_kedua}}/g, selectedProfil?.alamat || '[Alamat Pihak Kedua]');\r\n\r\n    return newContent;\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}