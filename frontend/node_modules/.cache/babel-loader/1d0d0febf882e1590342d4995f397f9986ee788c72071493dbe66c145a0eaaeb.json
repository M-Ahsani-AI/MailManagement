{"ast":null,"code":"export function renderBastTemplate(template, formData, dynamicFields, items, user) {\n  if (!template) return '';\n  let newContent = template;\n\n  // ✅ KOREKSI 1: Logika pembuatan kop surat baru\n  const baseUrl = process.env.REACT_APP_API_URL.replace('/api', '');\n  const logoUrl = user !== null && user !== void 0 && user.logo ? `${baseUrl}/uploads/${user.logo}` : '';\n  const logoHTML = user !== null && user !== void 0 && user.logo ? `<img src=\"${logoUrl}\" style=\"width: 250px; height: auto;\">` : '';\n  const headerHTML = `\n        <div style=\"display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 3px solid black; padding-bottom: 10px; margin-bottom: 20px;\">\n            <div style=\"text-align: left;\">\n                <h1 style=\"margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;\">${(user === null || user === void 0 ? void 0 : user.nama) || 'NAMA PERUSAHAAN'}</h1>\n                <p style=\"margin: 5px 0 0 0; font-size: 12px;\">${(user === null || user === void 0 ? void 0 : user.alamat) || 'Alamat Perusahaan'}</p>\n                <p style=\"margin: 5px 0 0 0; font-size: 12px;\">Telp: ${(user === null || user === void 0 ? void 0 : user.no_telp) || '-'} | Email: ${(user === null || user === void 0 ? void 0 : user.email) || '-'}</p>\n            </div>\n            <div style=\"text-align: right;\">\n                ${logoHTML}\n            </div>\n        </div>\n    `;\n\n  // QR Code\n  const qrCodeHTML = formData.qrcode_base64 ? `<div style=\"margin: 10px 0;\"><img src=\"${formData.qrcode_base64}\" alt=\"QR Code\" style=\"width: 80px; height: 80px;\"></div>` : `<div style=\"margin: 10px 0; width: 80px; height: 80px; border: 1px solid #ccc;\"></div>`;\n\n  // Tabel Produk\n  const tableRows = items.map(item => {\n    const totalHarga = (Number(item.qty) || 0) * (Number(item.harga_per_unit) || 0);\n    const formatCurrency = num => `Rp ${Number(num || 0).toLocaleString('id-ID')}`;\n    return `\n            <tr>\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.produk || ''}</td>\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.deskripsi || ''}</td>\n                <td style=\"border: 1px solid #000; text-align: center; padding: 6px;\">${item.qty || 0}</td>\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">${formatCurrency(item.harga_per_unit)}</td>\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">${formatCurrency(totalHarga)}</td>\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.kondisi || ''}</td>\n            </tr>\n        `;\n  }).join('');\n  const tableHTML = items.length > 0 ? `\n        <table style=\"width: 100%; border-collapse: collapse; font-size: 12px; margin: 20px 0;\">\n            <thead>\n                <tr style=\"background-color: #f2f2f2;\">\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Produk</th>\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Deskripsi</th>\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Qty</th>\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Harga per unit</th>\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Total harga</th>\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Kondisi barang</th>\n                </tr>\n            </thead>\n            <tbody>${tableRows}</tbody>\n        </table>` : '<p><i>(Belum ada rincian produk/jasa)</i></p>';\n\n  // Data Tanggal\n  const tanggal = new Date(formData.tanggal || Date.now());\n  const options = {\n    weekday: 'long',\n    day: 'numeric',\n    month: 'long',\n    year: 'numeric'\n  };\n  const tanggalLengkap = tanggal.toLocaleDateString('id-ID', options).split(', ')[1];\n  const namaHari = tanggal.toLocaleDateString('id-ID', {\n    weekday: 'long'\n  });\n  const tanggalSingkat = tanggal.toLocaleDateString('id-ID', {\n    day: 'numeric',\n    month: 'long',\n    year: 'numeric'\n  });\n\n  // ✅ KOREKSI 2: Ganti semua placeholder dengan data yang relevan\n  newContent = newContent.replace('{{kop_surat}}', headerHTML).replace('{{qrcode}}', qrCodeHTML).replace('{{tabel_produk}}', tableHTML).replace(/{{nomor_dokumen}}/g, formData.no_bast || '...').replace(/{{perihal}}/g, formData.perihal || '...').replace(/{{nama_hari}}/g, namaHari).replace(/{{tanggal_dokumen}}/g, tanggalLengkap).replace(/{{tanggal_dokumen_singkat}}/g, tanggalSingkat).replace(/{{nama_pihak_pertama}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.nama_pihak_pertama) || (user === null || user === void 0 ? void 0 : user.nama) || '-').replace(/{{jabatan_pihak_pertama}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.jabatan_pihak_pertama) || '-').replace(/{{alamat_pihak_pertama}}/g, (user === null || user === void 0 ? void 0 : user.alamat) || '-').replace(/{{nama_pihak_kedua}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.nama_pihak_kedua) || '-').replace(/{{jabatan_pihak_kedua}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.jabatan_pihak_kedua) || '-').replace(/{{nip_pihak_kedua}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.nip_pihak_kedua) || '-').replace(/{{alamat_pihak_kedua}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.alamat_pihak_kedua) || '-');\n  return newContent;\n}","map":{"version":3,"names":["renderBastTemplate","template","formData","dynamicFields","items","user","newContent","baseUrl","process","env","REACT_APP_API_URL","replace","logoUrl","logo","logoHTML","headerHTML","nama","alamat","no_telp","email","qrCodeHTML","qrcode_base64","tableRows","map","item","totalHarga","Number","qty","harga_per_unit","formatCurrency","num","toLocaleString","produk","deskripsi","kondisi","join","tableHTML","length","tanggal","Date","now","options","weekday","day","month","year","tanggalLengkap","toLocaleDateString","split","namaHari","tanggalSingkat","no_bast","perihal","nama_pihak_pertama","jabatan_pihak_pertama","nama_pihak_kedua","jabatan_pihak_kedua","nip_pihak_kedua","alamat_pihak_kedua"],"sources":["C:/Users/moham/Documents/CODE/SURAT CV MALIKI/frontend/src/utils/renderBastTemplate.js"],"sourcesContent":["export function renderBastTemplate(template, formData, dynamicFields, items, user) {\r\n    if (!template) return '';\r\n\r\n    let newContent = template;\r\n\r\n    // ✅ KOREKSI 1: Logika pembuatan kop surat baru\r\n    const baseUrl = process.env.REACT_APP_API_URL.replace('/api', '');\r\n    const logoUrl = user?.logo ? `${baseUrl}/uploads/${user.logo}` : '';\r\n    const logoHTML = user?.logo\r\n        ? `<img src=\"${logoUrl}\" style=\"width: 250px; height: auto;\">`\r\n        : '';\r\n\r\n    const headerHTML = `\r\n        <div style=\"display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 3px solid black; padding-bottom: 10px; margin-bottom: 20px;\">\r\n            <div style=\"text-align: left;\">\r\n                <h1 style=\"margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;\">${user?.nama || 'NAMA PERUSAHAAN'}</h1>\r\n                <p style=\"margin: 5px 0 0 0; font-size: 12px;\">${user?.alamat || 'Alamat Perusahaan'}</p>\r\n                <p style=\"margin: 5px 0 0 0; font-size: 12px;\">Telp: ${user?.no_telp || '-'} | Email: ${user?.email || '-'}</p>\r\n            </div>\r\n            <div style=\"text-align: right;\">\r\n                ${logoHTML}\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\n    // QR Code\r\n    const qrCodeHTML = formData.qrcode_base64\r\n        ? `<div style=\"margin: 10px 0;\"><img src=\"${formData.qrcode_base64}\" alt=\"QR Code\" style=\"width: 80px; height: 80px;\"></div>`\r\n        : `<div style=\"margin: 10px 0; width: 80px; height: 80px; border: 1px solid #ccc;\"></div>`;\r\n\r\n    // Tabel Produk\r\n    const tableRows = items.map(item => {\r\n        const totalHarga = (Number(item.qty) || 0) * (Number(item.harga_per_unit) || 0);\r\n        const formatCurrency = (num) => `Rp ${Number(num || 0).toLocaleString('id-ID')}`;\r\n        return `\r\n            <tr>\r\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.produk || ''}</td>\r\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.deskripsi || ''}</td>\r\n                <td style=\"border: 1px solid #000; text-align: center; padding: 6px;\">${item.qty || 0}</td>\r\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">${formatCurrency(item.harga_per_unit)}</td>\r\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">${formatCurrency(totalHarga)}</td>\r\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.kondisi || ''}</td>\r\n            </tr>\r\n        `;\r\n    }).join('');\r\n\r\n    const tableHTML = items.length > 0 ? `\r\n        <table style=\"width: 100%; border-collapse: collapse; font-size: 12px; margin: 20px 0;\">\r\n            <thead>\r\n                <tr style=\"background-color: #f2f2f2;\">\r\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Produk</th>\r\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Deskripsi</th>\r\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Qty</th>\r\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Harga per unit</th>\r\n                    <th style=\"border: 1px solid #000; padding: 8px;\">Total harga</th>\r\n                    <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Kondisi barang</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>${tableRows}</tbody>\r\n        </table>` : '<p><i>(Belum ada rincian produk/jasa)</i></p>';\r\n\r\n    // Data Tanggal\r\n    const tanggal = new Date(formData.tanggal || Date.now());\r\n    const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };\r\n    const tanggalLengkap = tanggal.toLocaleDateString('id-ID', options).split(', ')[1];\r\n    const namaHari = tanggal.toLocaleDateString('id-ID', { weekday: 'long' });\r\n    const tanggalSingkat = tanggal.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });\r\n\r\n    // ✅ KOREKSI 2: Ganti semua placeholder dengan data yang relevan\r\n    newContent = newContent\r\n        .replace('{{kop_surat}}', headerHTML)\r\n        .replace('{{qrcode}}', qrCodeHTML)\r\n        .replace('{{tabel_produk}}', tableHTML)\r\n        .replace(/{{nomor_dokumen}}/g, formData.no_bast || '...')\r\n        .replace(/{{perihal}}/g, formData.perihal || '...')\r\n        .replace(/{{nama_hari}}/g, namaHari)\r\n        .replace(/{{tanggal_dokumen}}/g, tanggalLengkap)\r\n        .replace(/{{tanggal_dokumen_singkat}}/g, tanggalSingkat)\r\n        .replace(/{{nama_pihak_pertama}}/g, dynamicFields?.nama_pihak_pertama || user?.nama || '-')\r\n        .replace(/{{jabatan_pihak_pertama}}/g, dynamicFields?.jabatan_pihak_pertama || '-')\r\n        .replace(/{{alamat_pihak_pertama}}/g, user?.alamat || '-')\r\n        .replace(/{{nama_pihak_kedua}}/g, dynamicFields?.nama_pihak_kedua || '-')\r\n        .replace(/{{jabatan_pihak_kedua}}/g, dynamicFields?.jabatan_pihak_kedua || '-')\r\n        .replace(/{{nip_pihak_kedua}}/g, dynamicFields?.nip_pihak_kedua || '-')\r\n        .replace(/{{alamat_pihak_kedua}}/g, dynamicFields?.alamat_pihak_kedua || '-');\r\n\r\n    return newContent;\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}