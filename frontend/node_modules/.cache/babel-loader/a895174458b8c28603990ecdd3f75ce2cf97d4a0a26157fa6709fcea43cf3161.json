{"ast":null,"code":"// frontend/src/utils/renderBastTemplate.js\nexport function renderBastTemplate(template, formData, dynamicFields, items, user) {\n  if (!template) return '';\n  let newContent = template;\n\n  // === 1. RENDER KOP SURAT (HEADER) ===\n  const baseUrl = process.env.REACT_APP_API_URL.replace('/api', '');\n  const logoUrl = user !== null && user !== void 0 && user.logo ? `${baseUrl}/uploads/${user.logo}` : '';\n  const logo = user !== null && user !== void 0 && user.logo ? `<img src=\"${logoUrl}\" alt=\"Logo\" style=\"max-width:310px; max-height:155px; object-fit:contain; margin-left:auto;\">` : '';\n  const headerHTML = `\n        <div style=\"display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 4px solid black; padding-bottom: 10px; margin-bottom: 20px;\">\n            <div>\n                <h1 style=\"margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;\">${(user === null || user === void 0 ? void 0 : user.nama) || ''}</h1>\n                <p style=\"margin: 5px 0; font-size: 12px;\">${(user === null || user === void 0 ? void 0 : user.alamat) || ''}</p>\n                <p style=\"margin: 5px 0; font-size: 12px;\">Telp: ${(user === null || user === void 0 ? void 0 : user.no_telp) || ''} | Email: ${(user === null || user === void 0 ? void 0 : user.email) || ''}</p>\n            </div>\n            ${logo ? `<div style=\"text-align:right;\">${logo}</div>` : ''}\n        </div>\n    `;\n\n  // === 2. RENDER QR CODE ===\n  const qrCodeHTML = formData.qrcode_base64 ? `<div style=\"margin: 10px 0;\"><img src=\"${formData.qrcode_base64}\" alt=\"QR Code\" style=\"width: 80px; height: 80px;\"></div>` : `<div style=\"margin: 10px 0;\"><div style=\"width: 80px; height: 80px; border: 1px solid #ccc; font-size: 10px; display: flex; align-items: center; justify-content: center; color: #888;\">QR Code</div></div>`;\n\n  // === 3. GENERATE TABEL PRODUK/JASA ===\n  const tableRows = items.map(item => {\n    const totalHarga = (Number(item.qty) || 0) * (Number(item.harga_per_unit) || 0);\n    return `\n            <tr>\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.produk || ''}</td>\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.deskripsi || ''}</td>\n                <td style=\"border: 1px solid #000; text-align: center; padding: 6px;\">${item.qty || 0}</td>\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">Rp ${Number(item.harga_per_unit || 0).toLocaleString('id-ID')}</td>\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">Rp ${totalHarga.toLocaleString('id-ID')}</td>\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.kondisi || ''}</td>\n            </tr>\n        `;\n  }).join('');\n  const tableHTML = items.length > 0 ? `\n        <table style=\"width: 100%; border-collapse: collapse; font-size: 12px; margin: 20px 0;\">\n            <thead><tr style=\"background-color: #f2f2f2;\">\n                <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Produk</th>\n                <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Deskripsi</th>\n                <th style=\"border: 1px solid #000; padding: 8px;\">Qty</th>\n                <th style=\"border: 1px solid #000; padding: 8px;\">Harga per unit</th>\n                <th style=\"border: 1px solid #000; padding: 8px;\">Total harga</th>\n                <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Kondisi barang</th>\n            </tr></thead>\n            <tbody>${tableRows}</tbody>\n        </table>` : '<p><i>Tidak ada rincian produk/jasa yang diserahkan.</i></p>';\n\n  // === 4. DATA UMUM & GANTI PLACEHOLDER ===\n  const tanggal = new Date(formData.tanggal || Date.now());\n  const options = {\n    weekday: 'long',\n    day: 'numeric',\n    month: 'long',\n    year: 'numeric'\n  };\n  const tanggalLengkap = tanggal.toLocaleDateString('id-ID', options).split(', ')[1]; // \"4 September 2025\"\n  const namaHari = tanggal.toLocaleDateString('id-ID', {\n    weekday: 'long'\n  }); // \"Kamis\"\n  const tanggalSingkat = tanggal.toLocaleDateString('id-ID', {\n    day: 'numeric',\n    month: 'long',\n    year: 'numeric'\n  });\n  newContent = newContent.replace('{{kop_surat}}', headerHTML).replace('{{qrcode}}', qrCodeHTML).replace('{{tabel_produk}}', tableHTML).replace(/{{nomor_urut}}/g, formData.no_bast ? formData.no_bast.split('/')[0] : '...').replace(/{{bulan_romawi}}/g, formData.no_bast ? formData.no_bast.split('/')[3] : 'IX').replace(/{{tahun_dokumen}}/g, formData.no_bast ? formData.no_bast.split('/')[4] : new Date().getFullYear()).replace(/{{nama_hari}}/g, namaHari).replace(/{{tanggal_dokumen}}/g, tanggalLengkap).replace(/{{tanggal_dokumen_singkat}}/g, tanggalSingkat)\n  // ✅ KOREKSI: Mengambil semua data dari dynamicFields dan user\n  .replace(/{{nama_pihak_pertama}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.nama_pihak_pertama) || (user === null || user === void 0 ? void 0 : user.nama) || '[Nama Pihak Pertama]').replace(/{{jabatan_pihak_pertama}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.jabatan_pihak_pertama) || '[Jabatan Pihak Pertama]').replace(/{{alamat_pihak_pertama}}/g, (user === null || user === void 0 ? void 0 : user.alamat) || '[Alamat Pihak Pertama]').replace(/{{nama_pihak_kedua}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.nama_pihak_kedua) || '[Nama Pihak Kedua]').replace(/{{jabatan_pihak_kedua}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.jabatan_pihak_kedua) || '[Jabatan Pihak Kedua]').replace(/{{nip_pihak_kedua}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.nip_pihak_kedua) || '-').replace(/{{alamat_pihak_kedua}}/g, (dynamicFields === null || dynamicFields === void 0 ? void 0 : dynamicFields.alamat_pihak_kedua) || '[Alamat Pihak Kedua]');\n  return newContent;\n}","map":{"version":3,"names":["renderBastTemplate","template","formData","dynamicFields","items","user","newContent","baseUrl","process","env","REACT_APP_API_URL","replace","logoUrl","logo","headerHTML","nama","alamat","no_telp","email","qrCodeHTML","qrcode_base64","tableRows","map","item","totalHarga","Number","qty","harga_per_unit","produk","deskripsi","toLocaleString","kondisi","join","tableHTML","length","tanggal","Date","now","options","weekday","day","month","year","tanggalLengkap","toLocaleDateString","split","namaHari","tanggalSingkat","no_bast","getFullYear","nama_pihak_pertama","jabatan_pihak_pertama","nama_pihak_kedua","jabatan_pihak_kedua","nip_pihak_kedua","alamat_pihak_kedua"],"sources":["C:/Users/moham/Documents/CODE/SURAT CV MALIKI/frontend/src/utils/renderBastTemplate.js"],"sourcesContent":["// frontend/src/utils/renderBastTemplate.js\r\nexport function renderBastTemplate(template, formData, dynamicFields, items, user) {\r\n    if (!template) return '';\r\n\r\n    let newContent = template;\r\n\r\n    // === 1. RENDER KOP SURAT (HEADER) ===\r\n    const baseUrl = process.env.REACT_APP_API_URL.replace('/api', ''); \r\n    const logoUrl = user?.logo ? `${baseUrl}/uploads/${user.logo}` : '';\r\n    const logo = user?.logo\r\n        ? `<img src=\"${logoUrl}\" alt=\"Logo\" style=\"max-width:310px; max-height:155px; object-fit:contain; margin-left:auto;\">`\r\n        : '';\r\n    \r\n    const headerHTML = `\r\n        <div style=\"display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 4px solid black; padding-bottom: 10px; margin-bottom: 20px;\">\r\n            <div>\r\n                <h1 style=\"margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;\">${user?.nama || ''}</h1>\r\n                <p style=\"margin: 5px 0; font-size: 12px;\">${user?.alamat || ''}</p>\r\n                <p style=\"margin: 5px 0; font-size: 12px;\">Telp: ${user?.no_telp || ''} | Email: ${user?.email || ''}</p>\r\n            </div>\r\n            ${logo ? `<div style=\"text-align:right;\">${logo}</div>` : ''}\r\n        </div>\r\n    `;\r\n\r\n    // === 2. RENDER QR CODE ===\r\n    const qrCodeHTML = formData.qrcode_base64\r\n        ? `<div style=\"margin: 10px 0;\"><img src=\"${formData.qrcode_base64}\" alt=\"QR Code\" style=\"width: 80px; height: 80px;\"></div>`\r\n        : `<div style=\"margin: 10px 0;\"><div style=\"width: 80px; height: 80px; border: 1px solid #ccc; font-size: 10px; display: flex; align-items: center; justify-content: center; color: #888;\">QR Code</div></div>`;\r\n    \r\n    // === 3. GENERATE TABEL PRODUK/JASA ===\r\n    const tableRows = items.map(item => {\r\n        const totalHarga = (Number(item.qty) || 0) * (Number(item.harga_per_unit) || 0);\r\n        return `\r\n            <tr>\r\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.produk || ''}</td>\r\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.deskripsi || ''}</td>\r\n                <td style=\"border: 1px solid #000; text-align: center; padding: 6px;\">${item.qty || 0}</td>\r\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">Rp ${Number(item.harga_per_unit || 0).toLocaleString('id-ID')}</td>\r\n                <td style=\"border: 1px solid #000; text-align: right; padding: 6px;\">Rp ${totalHarga.toLocaleString('id-ID')}</td>\r\n                <td style=\"border: 1px solid #000; padding: 6px;\">${item.kondisi || ''}</td>\r\n            </tr>\r\n        `;\r\n    }).join('');\r\n\r\n    const tableHTML = items.length > 0 ? `\r\n        <table style=\"width: 100%; border-collapse: collapse; font-size: 12px; margin: 20px 0;\">\r\n            <thead><tr style=\"background-color: #f2f2f2;\">\r\n                <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Produk</th>\r\n                <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Deskripsi</th>\r\n                <th style=\"border: 1px solid #000; padding: 8px;\">Qty</th>\r\n                <th style=\"border: 1px solid #000; padding: 8px;\">Harga per unit</th>\r\n                <th style=\"border: 1px solid #000; padding: 8px;\">Total harga</th>\r\n                <th style=\"border: 1px solid #000; padding: 8px; text-align: left;\">Kondisi barang</th>\r\n            </tr></thead>\r\n            <tbody>${tableRows}</tbody>\r\n        </table>` : '<p><i>Tidak ada rincian produk/jasa yang diserahkan.</i></p>';\r\n\r\n    // === 4. DATA UMUM & GANTI PLACEHOLDER ===\r\n    const tanggal = new Date(formData.tanggal || Date.now());\r\n    const options = { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' };\r\n    const tanggalLengkap = tanggal.toLocaleDateString('id-ID', options).split(', ')[1]; // \"4 September 2025\"\r\n    const namaHari = tanggal.toLocaleDateString('id-ID', { weekday: 'long' }); // \"Kamis\"\r\n    const tanggalSingkat = tanggal.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });\r\n\r\n    newContent = newContent\r\n        .replace('{{kop_surat}}', headerHTML)\r\n        .replace('{{qrcode}}', qrCodeHTML)\r\n        .replace('{{tabel_produk}}', tableHTML)\r\n        .replace(/{{nomor_urut}}/g, formData.no_bast ? formData.no_bast.split('/')[0] : '...')\r\n        .replace(/{{bulan_romawi}}/g, formData.no_bast ? formData.no_bast.split('/')[3] : 'IX')\r\n        .replace(/{{tahun_dokumen}}/g, formData.no_bast ? formData.no_bast.split('/')[4] : new Date().getFullYear())\r\n        .replace(/{{nama_hari}}/g, namaHari)\r\n        .replace(/{{tanggal_dokumen}}/g, tanggalLengkap)\r\n        .replace(/{{tanggal_dokumen_singkat}}/g, tanggalSingkat)\r\n        // ✅ KOREKSI: Mengambil semua data dari dynamicFields dan user\r\n        .replace(/{{nama_pihak_pertama}}/g, dynamicFields?.nama_pihak_pertama || user?.nama || '[Nama Pihak Pertama]')\r\n        .replace(/{{jabatan_pihak_pertama}}/g, dynamicFields?.jabatan_pihak_pertama || '[Jabatan Pihak Pertama]')\r\n        .replace(/{{alamat_pihak_pertama}}/g, user?.alamat || '[Alamat Pihak Pertama]')\r\n        .replace(/{{nama_pihak_kedua}}/g, dynamicFields?.nama_pihak_kedua || '[Nama Pihak Kedua]')\r\n        .replace(/{{jabatan_pihak_kedua}}/g, dynamicFields?.jabatan_pihak_kedua || '[Jabatan Pihak Kedua]')\r\n        .replace(/{{nip_pihak_kedua}}/g, dynamicFields?.nip_pihak_kedua || '-')\r\n        .replace(/{{alamat_pihak_kedua}}/g, dynamicFields?.alamat_pihak_kedua || '[Alamat Pihak Kedua]');\r\n\r\n    return newContent;\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}